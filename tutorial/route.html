---
layout: default
---

<div class="col-md-12">
    <h2 id="controller-sec">How to Create Controller and Route</h2>
    <hr/>
    <div class="bs-callout bs-callout-info">
        <p>
            Controllers are configuration classes which provides all information about routes that have something similar to each other. For example
            resource <code>CombinedFeedRoute</code> should have one controller configuration with all operations which are available to do with this resource.
            There is one abstract class <code>TypedControllerConfiguration</code> that makes a route creation very easy because contains
            various combinations of parameters to makes a work with it as convenient as possible. Its usage is shown below.
        </p>
        <p>
            There are several ways to configure the body of the route:
        </p>
        <ul>
            <li>using a lambda expression</li>
            <li>using a method reference</li>
            <li>using an implementation of the interface <code>RouteAcion&lt;Request&lt;REQ&gt;, Response&lt;RESP&gt;&gt;</code></li>
        </ul>
    </div>
    <div class="bs-callout bs-callout-warning">
        <p>
            Maybe someone may find strict declaring of Request/Response types as a verbose and annoying activity, but this is the
            biggest advantage of JoyRest. Since this strict defining types allows to JoyRest resolve Writes/Readers during
            an application bootstrapping and not during a Request processing. This is a trade-off between an additional written code
            and a performance impact.
        </p>
        <code>JoyRest chose a better performance !!</code>
    </div>

    <h4>Lambda expression example</h4>
<pre class="line-numbers"><code class="language-java">
    public class CombinedFeedRoute extends TypedControllerConfiguration {

    @Inject
    private CrudService&ltCombinedFeed&gt feedService;

    @Override
    protected void configure() {
        setGlobalPath("feeds");

        post((request, response) -> {
            CombinedFeed feed = feedService.save(request.getEntity());
            response.entity(feed)
                .status(CREATED));
        }, Req(CombinedFeed.class), Resp(CombinedFeed.class))
            .consumes(JSON).produces(JSON);
    }
}</code></pre>

    <h4>Method reference example</h4>
<pre class="line-numbers"><code class="language-java">
public class CombinedFeedRoute extends TypedControllerConfiguration {

    @Inject
    private CrudService&ltCombinedFeed&gt feedService;

    @Override
    protected void configure() {
        setGlobalPath("feeds");

        post(this::postFeed, Req(CombinedFeed.class), Resp(CombinedFeed.class))
            .consumes(JSON).produces(JSON);
    }

    private void postFeed(Request&ltCombinedFeed&gt req, Response&ltCombinedFeed&gt resp) {
        CombinedFeed feed = feedService.save(req.getEntity());
        resp.entity(feed)
            .status(CREATED);
    }
}</code></pre>

    <h4>RouteAction interface implementation example</h4>
<pre class="line-numbers"><code class="language-java">
public class CombinedFeedRoute extends TypedControllerConfiguration {

    @Inject
    private CrudService&ltCombinedFeed&gt feedService;

    @Override
    protected void configure() {
        setGlobalPath("feeds");

        post(new PostFeed(), Req(CombinedFeed.class), Resp(CombinedFeed.class))
            .consumes(JSON).produces(JSON);
    }

    private class PostFeed implements RouteAction&ltRequest&ltCombinedFeed&gt, Response&ltCombinedFeed&gt&gt {

        @Override
        public void perform(Request&ltCombinedFeed&gt req, Response&ltCombinedFeed&gt resp) {
            CombinedFeed feed = feedService.save(req.getEntity());
            resp.entity(feed)
                .status(CREATED);
        }
    }
}</code></pre>

    <hr>
</div>