---
layout: default
---
<div class="col-md-12">
    <h3 id="github-sec">How to create Application Context</h3>
    <code>Application Context</code> is an entity created using <code>Configurer</code> class and <code>Application Config</code>.
    Then Application Context is used along with a servlet-specific handler to configure the JoyRest application.


    <hr class="col-md-12">

    <h4>HK2-based configuration</h4>
<pre class="line-numbers"><code class="language-java">
public static void main(String... args) throws Exception {
    HK2Configurer configurer = new HK2Configurer();
    ApplicationContext applicationContext = configurer.initialize(new ApplicationBinder());
    GrizzlyServer.start(applicationContext, 5000, "/services");
}</code></pre>

<pre class="line-numbers"><code class="language-java">
public class ApplicationBinder extends AbstractBinder {

    @Override
    protected void configure() {
        bind(JokeServiceImpl.class)
            .to(new TypeLiteral<JokeService>() {})
            .in(Singleton.class);

        bind(JokeController.class)
            .to(ControllerConfiguration.class)
            .in(Singleton.class);

        bind(new JsonReaderWriter())
            .to(Reader.class)
            .to(Writer.class);
    }
}</code></pre>

    <h4>Spring-based configuration</h4>
<pre class="line-numbers"><code class="language-java">
public static void main(String... args) throws Exception {
    SpringJavaConfigurer configurer = new SpringJavaConfigurer();
    ApplicationContext applicationContext = configurer.initialize(new ApplicationConfiguration());
    GrizzlyServer.start(applicationContext, 5000, "/services");
}</code></pre>

<pre class="line-numbers"><code class="language-java">
@Configuration
public class ApplicationConfiguration {

    @Bean
    JsonReaderWriter jsonReaderWriter(){
        return new JsonReaderWriter();
    }

    @Bean
    ControllerConfiguration jokeControllerConfiguration() {
        return new JokeController();
    }

    @Bean
    JokeService jokeService() {
        return new JokeServiceImpl();
    }
}</code></pre>

    <h4>Guice-based configuration</h4>
<pre class="line-numbers"><code class="language-java">
public static void main(String... args) throws Exception {
    Configurer configurer = new GuiceConfigurer();
    ApplicationContext applicationContext = configurer.initialize(new GuiceApplicationModule());
    GrizzlyServer.start(applicationContext, 5000, "/services");
}</code></pre>

<pre class="line-numbers"><code class="language-java">
public class GuiceApplicationModule extends AbstractModule {

    @Override
    protected void configure() {
        Multibinder<ControllerConfiguration> controllerBinder = newSetBinder(binder(), ControllerConfiguration.class);
        controllerBinder.addBinding().to(JokeController.class).in(Singleton.class);

        JsonReaderWriter readerWriter = new JsonReaderWriter();
        Multibinder<Writer> writerBinder = newSetBinder(binder(), Writer.class);
        writerBinder.addBinding().toInstance(readerWriter);

        Multibinder<Reader> readerBinder = newSetBinder(binder(), Reader.class);
        readerBinder.addBinding().toInstance(readerWriter);

        bind(JokeService.class)
            .to(JokeServiceImpl.class)
            .in(Singleton.class);
    }
}</code></pre>

    <h4>Dagger-based configuration</h4>
<pre class="line-numbers"><code class="language-java">
public static void main(String... args) throws Exception {
    DaggerConfigurer configurer = new DaggerConfigurer();
    ApplicationContext applicationContext = configurer.initialize(new DaggerApplicationModule());
    GrizzlyServer.start(applicationContext, 5000, "/services");
}</code></pre>

<pre class="line-numbers"><code class="language-java">
@Module(injects = { DaggerConfigurer.DaggerConfigurationProvider.class, JokeController.class }, library = true)
public class DaggerApplicationModule {

    private final JsonReaderWriter jsonReaderWriter = new JsonReaderWriter();

    /* only for dagger-compiler purposes */
    @Provides(type = Provides.Type.SET)
    Aspect nullAspect() {
        return null;
    }

    /* only for dagger-compiler purposes */
    @Provides(type = Provides.Type.SET)
    ExceptionConfiguration jokeExceptionConfiguration() {
        return null;
    }

    @Provides(type = Provides.Type.SET)
    Writer jsonWriter() {
        return jsonReaderWriter;
    }

    @Provides(type = Provides.Type.SET)
    Reader jsonReader() {
        return jsonReaderWriter;
    }

    @Provides(type = Provides.Type.SET)
    ControllerConfiguration jokeControllerConfiguration() {
        return new JokeController();
    }

    @Provides
    JokeService jokeService() {
        return new JokeServiceImpl();
    }

}</code></pre>

    <hr>
</div>